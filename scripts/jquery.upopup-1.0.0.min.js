/* uPopup: Source and license available at http://github.com/browndav/upopup */
(function(c){c.a={};c.a.b={create:function(b,a){var d=c.a.b.c,g=a||{},f=d.A(b);c(this).g(function(b,a){var e=f[b]||f.N;c.M(e)&&(e=e.call(e,a));var a=c(a),e=c(e),h=d.C(a);a.data("upopup",{j:h,options:g});d.z(h,a,e,g);d.i(h,a,e,g);g.p!==!1&&c(window).S(function(){c.a.b.c.i(h,a,e,g)})});return this},show:function(){var b=c.a.b.c;c(this).g(function(a,d){var g=b.d(d);c.a.b.c.h.call(d,!0,(g.options||{}).P)})},w:function(){var b=c.a.b.c;c(this).g(function(a,d){var g=b.d(d);c.a.b.c.h.call(d,!1,(g.options|| {}).O)})},G:function(){c.a.b.c.h.call(this,!1,function(b){b.remove();delete b})},elements:function(){var b=c.a.b.c;return c(c(this).map(function(a,d){var c=b.d(d).j;return c?c[0]:void 0}).filter(function(a){return!a}))},c:{q:0,r:16384,A:function(b){return c.L(b)?b:[b]},d:function(b){return c(b).data("upopup")||{}},n:function(b){for(var a,d,c=0,f=b.length;c<f;++c)if(!d||b[c]>d)d=b[c],a=c;return a},C:function(b){var a=c('<div class="upopup"><div class="direction"><div class="arrow first-arrow" /><div class="border"><div class="inner" /></div><div class="arrow last-arrow" /><div class="clear" /></div></div>'); c(".inner",a).append(b);return a},z:function(b,a){var d=c.a.b.c;b.v("z-index",d.r+d.q++);b.v("display","none");b.Q("body");c.a.b.show.call(a)},h:function(b,a){var d=c.a.b.c;c(this).g(function(c,f){function i(){a&&a.call(f,e)}var j=d.d(f),e=j.j;(j.options||{}).J!==!1?b?e.H(null,i):e.I(null,i):(b?e.show():e.w(),i.call(this))});return this},i:function(b,a,d,g){var f={},i=c.a.b.c,j=g||{},f=j.k,e=c(document),h=d.o(),e={x:e.width(),y:e.height()},l={x:d.outerWidth(!0),y:d.outerHeight(!0)};f?(f=i.l(f,i.d(a), h,l),f={x:[f.x,e.x-f.x],y:[f.y,e.y-f.y]}):f={x:[h.left,e.x-h.left-l.x],y:[h.top,e.y-h.top-l.y]};j.T!==!1&&(j=c(window),h={y:j.scrollTop(),x:j.scrollLeft()},f.x[0]-=h.x,f.x[1]-=e.x-(h.x+j.width()),f.y[0]-=h.y,f.y[1]-=e.y-(h.y+j.height()));e={x:i.n(f.x),y:i.n(f.y)};return i.p(b,a,d,e.x,e.y,g)},p:function(b,a,d,g,f,i){var j=c.a.b.c,e=i||{},h=e.k,i=b.f(".direction"),l=i.f(".arrow"),o=d.o(),n={x:b.outerWidth(!0),y:b.outerHeight(!0)},d={x:d.outerWidth(!0),y:d.outerHeight(!0)},p={x:(n.x-i.width())/2,y:(n.y-i.height())/2},l={x:l.outerWidth(),y:l.outerHeight()},m=j.t(b),k=e.B?[-1,1,0]:[1,0,1];h?(a=j.l(h,j.d(a),o,d),a={x:[a.x-n.x-k[0]*l.x/2+k[1]*m.x,a.x+k[0]*l.x/2-k[1]*m.x],y:[a.y-n.y+k[0]*l.y/2+k[2]*m.y,a.y-k[0]*l.y/2-k[2]*m.y]}):a={x:[o.left-n.x+k[1]*m.x+p.x-k[0]*l.x/2,o.left+d.x-k[1]*m.x-p.x+k[0]*l.x/2],y:[o.top-n.y+k[2]*m.y+p.y+k[0]*l.y/2,o.top+d.y-k[2]*m.y-p.y-k[0]*l.y/2]};if(!e.k){if(e.u||e.D)j=d.x/2,a.x[0]+=j,a.x[1]-=j;if(e.u||e.F)d=d.y/2,a.y[0]+=d,a.y[1]-=d}e=e.B?[["se","ne"],["s","n"]]:[["ese","e"],["wsw","w"]];i.R("se ne s n ese e wsw w");i.s(e[g][f]);b.o({top:a.y[f],left:a.x[g]})},t:function(b){var a=c("<div />").s("adjust");b.append(a);b={x:a.width(),y:a.height()};a.remove();return b},l:function(b,a,c,g){var f=b.pageX,b=b.pageY;a.e&&(f=c.left+a.e.x*g.x,b=c.top+a.e.y*g.y);if(!a.e)a.e={x:(f-c.left)/g.x,y:(b-c.top)/g.y};return{x:f,y:b}}}};c.m.a=function(b){return c.a.b[b].apply(this,Array.prototype.slice.call(arguments,1))}})($);(function(c){if(!c.m.f)c.m.f=function(b){if(b&&b!==""){var a=[];for(a.push(this);a.length>0;)for(var d=a.shift().children(),g=0;g<d.length;++g){var f=c(d[g]);if(f.K(b))return f;a.push(f)}}return c()}})($);
